{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xavie\\\\bootcamp\\\\collab\\\\skylab-bootcamp-201909\\\\staff\\\\javier-sevilla\\\\skillpop\\\\skillpop-app\\\\src\\\\components\\\\App\\\\index.js\";\nimport React, { useState, useEffect } from 'react';\nimport './index.sass';\nimport Register from '../Register';\nimport Header from '../Header';\nimport Login from '../Login';\nimport Landing from '../Landing';\nimport { Route, withRouter, Redirect } from 'react-router-dom';\nimport { authenticateUser, registerUser, retrieveUser, searchAds } from '../../logic';\nexport default withRouter(function ({\n  history\n}) {\n  // const [name, setName] = useState()\n  // const [tasks, setTasks] = useState([])\n  useEffect(() => {\n    const _sessionStorage = sessionStorage,\n          token = _sessionStorage.token; // (async () => {\n    //     if (token) {\n    //         const { name } = await retrieveUser(token)\n    //         setName(name)\n    //         await retrieveTasks(token)\n    //     }\n    // })()\n  }, [sessionStorage.token]);\n\n  async function handleRegister(name, surname, city, address, email, password) {\n    try {\n      await registerUser(name, surname, city, address, email, password);\n      history.push('/login');\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async function handleLogin(email, password) {\n    try {\n      const token = await authenticateUser(email, password);\n      sessionStorage.token = token;\n      history.push('/');\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async function handleSearch(query) {\n    try {\n      const token = await searchAds(query);\n      history.push('/login');\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  function handleGoBack(webant) {\n    history.push(`/${webant}`);\n  }\n\n  function handleLogout() {\n    sessionStorage.clear();\n    const webant = \" \";\n    handleGoBack(webant);\n  }\n\n  const _sessionStorage2 = sessionStorage,\n        token = _sessionStorage2.token;\n  return React.createElement(React.Fragment, null, React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    render: () => React.createElement(React.Fragment, null, React.createElement(Landing, {\n      onSearch: handleSearch,\n      onLogout: handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/register\",\n    render: () => React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), \"  \", React.createElement(Register, {\n      onRegister: handleRegister,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/login\",\n    render: () => React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), \" \", React.createElement(Login, {\n      onLogin: handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }));\n});\n{\n  /* <Route path=\"/register\" render={() => token ? <Redirect to=\"/board\" /> : <Register onRegister={handleRegister} onBack={handleGoBack} />} />\r\n  <Route path=\"/login\" render={() => token ? <Redirect to=\"/board\" /> : <Login onLogin={handleLogin} onBack={handleGoBack} />} />\r\n  <Route path=\"/board\" render={() => token ? <Board user={name} tasks={tasks} onLogout={handleLogout} onChangeTaskStatus={handleChangeTaskStatus} onNewTask={handleNewTask} /> : <Redirect to=\"/\" />} />\r\n  <Route path=\"/hello/:name\" render={props => <Hello name={props.match.params.name} />} />\r\n  <Route path=\"/hello/:name\" render={({ match: { params: { name } } }) => <Hello name={name} />} /> */\n}","map":{"version":3,"sources":["C:/Users/xavie/bootcamp/collab/skylab-bootcamp-201909/staff/javier-sevilla/skillpop/skillpop-app/src/components/App/index.js"],"names":["React","useState","useEffect","Register","Header","Login","Landing","Route","withRouter","Redirect","authenticateUser","registerUser","retrieveUser","searchAds","history","sessionStorage","token","handleRegister","name","surname","city","address","email","password","push","error","console","handleLogin","handleSearch","query","handleGoBack","webant","handleLogout","clear"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './index.sass'\r\nimport Register from '../Register'\r\nimport Header from '../Header'\r\nimport Login from '../Login'\r\nimport Landing from '../Landing'\r\nimport { Route, withRouter, Redirect } from 'react-router-dom'\r\nimport { authenticateUser, registerUser, retrieveUser, searchAds} from '../../logic'\r\n\r\nexport default withRouter(function ({ history }) {\r\n    // const [name, setName] = useState()\r\n    // const [tasks, setTasks] = useState([])\r\n\r\n    useEffect(() => {\r\n        const { token } = sessionStorage;\r\n\r\n        // (async () => {\r\n        //     if (token) {\r\n        //         const { name } = await retrieveUser(token)\r\n\r\n        //         setName(name)\r\n\r\n        //         await retrieveTasks(token)\r\n        //     }\r\n        // })()\r\n    }, [sessionStorage.token])\r\n\r\n\r\n    async function handleRegister(name, surname, city, address, email, password) {\r\n        try {\r\n            await registerUser(name, surname, city, address, email, password)\r\n\r\n            history.push('/login')\r\n        } catch (error) {\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    async function handleLogin(email, password) {\r\n        try {\r\n            const token = await authenticateUser(email, password)\r\n\r\n            sessionStorage.token = token\r\n\r\n            history.push('/')\r\n        } catch (error) {\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    async function handleSearch(query) {\r\n        try {\r\n            const token = await searchAds(query)\r\n\r\n            history.push('/login')\r\n        } catch (error) {\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n\r\n    function handleGoBack(webant) { \r\n        history.push(`/${webant}`) \r\n        }\r\n\r\n    function handleLogout() {\r\n        sessionStorage.clear()\r\n        const webant = \" \"\r\n        handleGoBack(webant)\r\n    }\r\n\r\n    const { token } = sessionStorage\r\n\r\n    return <>\r\n        {/* <Route exact path=\"/\" render={() => <Header onBack={handleGoBack}/>} /> */}\r\n        <Route exact path=\"/\" render={() => <><Landing onSearch={handleSearch} onLogout={handleLogout}/></>}/> \r\n        <Route path=\"/register\" render={() => <><Header onBack={handleGoBack}/>  <Register onRegister={handleRegister}/></>}/> \r\n        <Route path=\"/login\" render={() => <><Header onBack={handleGoBack}/> <Login onLogin={handleLogin}/></>}/> \r\n\r\n    </>\r\n})\r\n{/* <Route path=\"/register\" render={() => token ? <Redirect to=\"/board\" /> : <Register onRegister={handleRegister} onBack={handleGoBack} />} />\r\n<Route path=\"/login\" render={() => token ? <Redirect to=\"/board\" /> : <Login onLogin={handleLogin} onBack={handleGoBack} />} />\r\n<Route path=\"/board\" render={() => token ? <Board user={name} tasks={tasks} onLogout={handleLogout} onChangeTaskStatus={handleChangeTaskStatus} onNewTask={handleNewTask} /> : <Redirect to=\"/\" />} />\r\n<Route path=\"/hello/:name\" render={props => <Hello name={props.match.params.name} />} />\r\n<Route path=\"/hello/:name\" render={({ match: { params: { name } } }) => <Hello name={name} />} /> */}"]},"metadata":{},"sourceType":"module"}