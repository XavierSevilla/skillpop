{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\xavie\\\\bootcamp\\\\collab\\\\skylab-bootcamp-201909\\\\staff\\\\javier-sevilla\\\\skillpop\\\\skillpop-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\xavie\\\\bootcamp\\\\collab\\\\skylab-bootcamp-201909\\\\staff\\\\javier-sevilla\\\\skillpop\\\\skillpop-app\\\\src\\\\components\\\\App\\\\index.js\";\nimport React, { useState, useEffect } from 'react';\nimport './index.sass';\nimport Register from '../Register';\nimport Header from '../Header';\nimport Login from '../Login';\nimport Landing from '../Landing';\nimport Search from '../Search';\nimport Detail from '../Detail';\nimport Profile from '../Profile';\nimport ModifyAd from '../ModifyAd';\nimport CreateAd from '../CreateAd';\nimport Favorites from '../Favorites';\nimport Chats from '../Chats';\nimport Messages from '../Messages';\nimport Feedback from '../Feedback';\nimport Footer from '../Footer';\nimport PublicProfile from '../PublicProfile';\nimport { Route, withRouter, Redirect, useLocation } from 'react-router-dom';\nimport { authenticateUser, registerUser, retrieveUser, searchAds, retrieveAd, retrievePublicUser, retrieveAds, removeAd, modifyAd, saveImageAd, modifyUser, saveImageProfile, createAd, retrievePublicAds, retrieveComments, addComment, retrieveFavs, toggleFavAd, retrieveChats, retrieveChat, addMessage, removeChat, createChat } from '../../logic';\nimport qs from 'querystringify';\nexport default withRouter(function ({\n  history,\n  location\n}) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        ads = _useState2[0],\n        setAds = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        adsSearch = _useState4[0],\n        setadsSearch = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        adId = _useState6[0],\n        setAdId = _useState6[1];\n\n  const _useState7 = useState([]),\n        _useState8 = _slicedToArray(_useState7, 2),\n        ad = _useState8[0],\n        setAd = _useState8[1];\n\n  const _useState9 = useState([]),\n        _useState10 = _slicedToArray(_useState9, 2),\n        user = _useState10[0],\n        setUser = _useState10[1];\n\n  const _useState11 = useState([]),\n        _useState12 = _slicedToArray(_useState11, 2),\n        idPublic = _useState12[0],\n        setIdPublic = _useState12[1];\n\n  const _useState13 = useState([]),\n        _useState14 = _slicedToArray(_useState13, 2),\n        comments = _useState14[0],\n        setComments = _useState14[1];\n\n  const _useState15 = useState([]),\n        _useState16 = _slicedToArray(_useState15, 2),\n        chats = _useState16[0],\n        setChats = _useState16[1];\n\n  const _useState17 = useState([]),\n        _useState18 = _slicedToArray(_useState17, 2),\n        chat = _useState18[0],\n        setChat = _useState18[1];\n\n  const _useState19 = useState([]),\n        _useState20 = _slicedToArray(_useState19, 2),\n        error = _useState20[0],\n        setError = _useState20[1];\n\n  const _useState21 = useState([]),\n        _useState22 = _slicedToArray(_useState21, 2),\n        query = _useState22[0],\n        setQuery = _useState22[1];\n\n  const _useState23 = useState(true),\n        _useState24 = _slicedToArray(_useState23, 2),\n        render = _useState24[0],\n        setRender = _useState24[1]; //history.pathname.split('/')\n\n\n  useEffect(() => {\n    const _sessionStorage = sessionStorage,\n          token = _sessionStorage.token;\n\n    (async () => {\n      if (token) {\n        const user = await retrieveUser(token);\n        setUser(user);\n\n        const _location$search$spli = location.search.split('?q='),\n              _location$search$spli2 = _slicedToArray(_location$search$spli, 2),\n              query = _location$search$spli2[1];\n\n        setQuery(query); // if (query) {\n        //     const ads = await searchAds(token, query)\n        //     setAds(ads)   \n        // }\n\n        const ads = await searchAds(token, query);\n        setadsSearch(ads);\n      }\n    })();\n  }, [sessionStorage.token, location.search]);\n\n  function handleGoBack() {\n    history.goBack(); // history.push(`/${webant}`) \n  }\n\n  function handleLogout() {\n    sessionStorage.clear();\n    history.push('/');\n  }\n\n  function handleGoToRegister() {\n    history.push('/register');\n  }\n\n  function handleGoToLogin() {\n    history.push('/login');\n  }\n\n  async function handleRegister(name, surname, city, address, email, password) {\n    try {\n      await registerUser(name, surname, city, address, email, password);\n      history.push('/login');\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleLogin(email, password) {\n    try {\n      const token = await authenticateUser(email, password);\n      sessionStorage.token = token;\n      history.push('/search');\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleSearch(query) {\n    try {\n      history.push(`/search?q=${query}`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleAdDetail(adId) {\n    try {\n      const token = sessionStorage.token;\n      const ad = await retrieveAd(token, adId);\n\n      const _ref = await retrievePublicUser(ad.user),\n            name = _ref.name,\n            id = _ref.id;\n\n      ad.name = name;\n      ad.idPublic = id;\n      setAdId(adId);\n      setAd(ad);\n      history.push(`/ad/${adId}`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleProfile() {\n    try {\n      const token = sessionStorage.token;\n      const user = await retrieveUser(token);\n      const ads = await retrieveAds(token);\n      setAds(ads);\n      setUser(user);\n      history.push(\"/profile\");\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleDeleteAd(adId) {\n    try {\n      const token = sessionStorage.token;\n      await removeAd(token, adId);\n      const ads = await retrieveAds(token);\n      setAds(ads);\n      history.push(\"/profile\");\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleToUpdateAd(adId) {\n    try {\n      const token = sessionStorage.token;\n      const ad = await retrieveAd(token, adId);\n      setAd(ad);\n      setAdId(adId); // history.push(\"/update\")    \n\n      history.push(`/update/${adId}`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleOnUpdateAd(image, adId, title, description, price) {\n    try {\n      const token = sessionStorage.token;\n      const priceN = Number.parseInt(price);\n      await modifyAd(token, adId, title, description, priceN);\n\n      if (image) {\n        await saveImageAd(token, adId, image);\n      }\n\n      const ad = await retrieveAd(token, adId);\n      setAd(ad);\n      setAdId(adId);\n      history.push(\"/profile\"); // history.push(`/update/${adId}`)\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleUpdateUser(image, name, surname, city, address) {\n    try {\n      const token = sessionStorage.token;\n      await modifyUser(token, name, surname, city, address);\n\n      if (image) {\n        await saveImageProfile(token, image);\n      }\n\n      const user = await retrieveUser(token);\n      setUser(user);\n      history.push(\"/profile\");\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleToCreateAd() {\n    history.push(\"/newad\");\n  }\n\n  async function handleCreateAd(image, title, price, description) {\n    try {\n      const token = sessionStorage.token;\n      const priceN = Number.parseInt(price);\n      const adId = await createAd(token, title, description, priceN);\n\n      if (image) {\n        await saveImageAd(token, adId, image);\n      }\n\n      const user = await retrieveUser(token);\n      const ad = await retrieveAd(token, adId);\n      setAd(ad);\n      setUser(user);\n      history.push(`/ad/${adId}`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleToPubliProfile(id) {\n    try {\n      const token = sessionStorage.token;\n      let user = \"\";\n      let ads = [];\n      let idPublic = \"\";\n\n      if (!id) {\n        user = await retrieveUser(token);\n        id = user.id;\n        ads = await retrieveAds(token);\n      } else {\n        user = await retrievePublicUser(id);\n        id = user.id;\n        ads = await retrievePublicAds(token, id);\n        idPublic = id;\n        setIdPublic(idPublic);\n      }\n\n      const comments = await retrieveComments(id);\n      setAds(ads);\n      setUser(user);\n      setComments(comments);\n      history.push(`/publicprofile/${id}`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleCreateComment(comment, id) {\n    try {\n      if (comment != \"\") {\n        const token = sessionStorage.token;\n        const idComment = await addComment(token, id, comment);\n        const comments = await retrieveComments(id);\n        setComments(comments);\n      }\n\n      history.push(`/publicprofile/${id}`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleToFavorites() {\n    try {\n      const token = sessionStorage.token;\n      const ads = await retrieveFavs(token);\n      setAds(ads);\n      history.push(`/favorites`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleFav() {\n    try {\n      const token = sessionStorage.token;\n      const ads = await retrieveFavs(token);\n      setAds(ads);\n      history.push(`/favorites`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleOnFav(id, comeFrom) {\n    try {\n      const token = sessionStorage.token;\n      await toggleFavAd(token, id);\n\n      if (comeFrom === 'favorites') {\n        const ads = await retrieveFavs(token);\n        setAds(ads);\n      } else if (comeFrom === 'search') {\n        const ads = await searchAds(token, query);\n        setadsSearch(ads);\n      } else if (comeFrom === 'ad') {\n        const ad = await retrieveAds(token, id);\n        setAds(ads);\n      } else {\n        const ads = await retrieveAds(token);\n        setAds(ads);\n      }\n\n      history.push(`/${comeFrom}`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleToChats() {\n    try {\n      const token = sessionStorage.token;\n      const chats = await retrieveChats(token);\n      const user = await retrieveUser(token);\n      setUser(user);\n      setChats(chats);\n      history.push(`/chats`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleToChat(idChat) {\n    try {\n      const token = sessionStorage.token;\n      const chat = await retrieveChat(token, idChat);\n      const user = await retrieveUser(token);\n      chat.idChat = idChat;\n      setUser(user);\n      setChat(chat);\n      history.push(`/chat/${idChat}`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleDeleteChat(idChat) {\n    try {\n      const token = sessionStorage.token;\n      await removeChat(token, idChat);\n      const chats = await retrieveChats(token);\n      const user = await retrieveUser(token);\n      setUser(user);\n      setChats(chats);\n      history.push(`/chats`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleCreateMessage(message, idChat) {\n    try {\n      if (message !== \"\") {\n        const token = sessionStorage.token;\n        const idMessage = await addMessage(token, idChat, message);\n        const chat = await retrieveChat(token, idChat);\n        chat.idChat = idChat;\n        setUser(user);\n        setChat(chat);\n      }\n\n      history.push(`/chat/${idChat}`);\n    } catch (error) {\n      setError(error);\n      history.push(\"/error\");\n    }\n  }\n\n  async function handleCreateChat(idPublic) {\n    try {\n      const token = sessionStorage.token;\n      const idChat = await createChat(token, idPublic);\n      const chat = await retrieveChat(token, idChat);\n      const user = await retrieveUser(token);\n      chat.idChat = idChat;\n      setUser(user);\n      setChat(chat);\n      history.push(`/chat/${idChat}`);\n    } catch (error) {\n      setError(error.message);\n      history.push(\"/error\");\n    }\n  }\n\n  const _sessionStorage2 = sessionStorage,\n        token = _sessionStorage2.token;\n  return React.createElement(React.Fragment, null, React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    render: () => token ? React.createElement(Redirect, {\n      to: \"/search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520\n      },\n      __self: this\n    }) : React.createElement(React.Fragment, null, React.createElement(Landing, {\n      onLogin: handleGoToLogin,\n      onRegister: handleGoToRegister,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520\n      },\n      __self: this\n    }), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 520\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/register\",\n    render: () => token ? React.createElement(Redirect, {\n      to: \"/search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521\n      },\n      __self: this\n    }) : React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521\n      },\n      __self: this\n    }), \"  \", React.createElement(Register, {\n      onRegister: handleRegister,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521\n      },\n      __self: this\n    }), \" \", React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 521\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/login\",\n    render: () => token ? React.createElement(Redirect, {\n      to: \"/search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522\n      },\n      __self: this\n    }) : React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522\n      },\n      __self: this\n    }), \" \", React.createElement(Login, {\n      onLogin: handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522\n      },\n      __self: this\n    }), \" \", React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 522\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/search\",\n    render: props => token ? React.createElement(React.Fragment, null, React.createElement(Search, {\n      query: query,\n      onSearch: handleSearch,\n      onLogout: handleLogout,\n      ads: adsSearch,\n      adDetail: handleAdDetail,\n      onProfile: handleProfile,\n      onToCreateAd: handleToCreateAd,\n      onToPubliProfile: handleToPubliProfile,\n      onToFavorites: handleToFavorites,\n      onFav: handleOnFav,\n      onToChats: handleToChats,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523\n      },\n      __self: this\n    }), \" \", React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/ad/:adId\",\n    render: () => token ? React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525\n      },\n      __self: this\n    }), React.createElement(Detail, {\n      ad: ad,\n      user: user,\n      onCreateChat: handleCreateChat,\n      onToPubliProfile: handleToPubliProfile,\n      onFav: handleOnFav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525\n      },\n      __self: this\n    }), \" \", React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/profile\",\n    render: () => token ? React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526\n      },\n      __self: this\n    }), React.createElement(Profile, {\n      ads: ads,\n      user: user,\n      adDetail: handleAdDetail,\n      onDeleteAd: handleDeleteAd,\n      onToUpdateAd: handleToUpdateAd,\n      onUpdateUser: handleUpdateUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/update/:adId\",\n    render: () => token ? React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527\n      },\n      __self: this\n    }), React.createElement(ModifyAd, {\n      ad: ad,\n      onUpdateAd: handleOnUpdateAd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527\n      },\n      __self: this\n    }), \" \", React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 527\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/newad\",\n    render: () => token ? React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528\n      },\n      __self: this\n    }), React.createElement(CreateAd, {\n      onCreateAd: handleCreateAd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528\n      },\n      __self: this\n    }), \" \", React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 528\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/publicprofile/:id\",\n    render: () => token ? React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529\n      },\n      __self: this\n    }), \" \", React.createElement(PublicProfile, {\n      comments: comments,\n      ads: ads,\n      user: user,\n      adDetail: handleAdDetail,\n      OnCreateComment: handleCreateComment,\n      onFav: handleOnFav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529\n      },\n      __self: this\n    }), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 529\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/favorites\",\n    render: () => token ? React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530\n      },\n      __self: this\n    }), React.createElement(Favorites, {\n      ads: ads,\n      adDetail: handleAdDetail,\n      onFav: handleOnFav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530\n      },\n      __self: this\n    }), \" \", React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 530\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/chats\",\n    render: () => token ? React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531\n      },\n      __self: this\n    }), React.createElement(Chats, {\n      chats: chats,\n      user: user,\n      onDeleteChat: handleDeleteChat,\n      onChat: handleToChat,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531\n      },\n      __self: this\n    }), \" \", React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 531\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/chat/:chatId\",\n    render: () => token ? React.createElement(React.Fragment, null, React.createElement(Header, {\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532\n      },\n      __self: this\n    }), React.createElement(Messages, {\n      chat: chat,\n      user: user,\n      OnCreateMessage: handleCreateMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532\n      },\n      __self: this\n    }), \" \", React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/error\",\n    render: () => React.createElement(React.Fragment, null, React.createElement(Feedback, {\n      error: error,\n      onBack: handleGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 533\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 533\n    },\n    __self: this\n  }));\n});\n{\n  /* <Route path=\"/register\" render={() => token ? <Redirect to=\"/board\" /> : <Register onRegister={handleRegister} onBack={handleGoBack} />} />\r\n  <Route path=\"/login\" render={() => token ? <Redirect to=\"/board\" /> : <Login onLogin={handleLogin} onBack={handleGoBack} />} />\r\n  <Route path=\"/board\" render={() => token ? <Board user={name} tasks={tasks} onLogout={handleLogout} onChangeTaskStatus={handleChangeTaskStatus} onNewTask={handleNewTask} /> : <Redirect to=\"/\" />} />\r\n  <Route path=\"/hello/:name\" render={props => <Hello name={props.match.params.name} />} />\r\n  <Route path=\"/hello/:name\" render={({ match: { params: { name } } }) => <Hello name={name} />} /> */\n}","map":{"version":3,"sources":["C:/Users/xavie/bootcamp/collab/skylab-bootcamp-201909/staff/javier-sevilla/skillpop/skillpop-app/src/components/App/index.js"],"names":["React","useState","useEffect","Register","Header","Login","Landing","Search","Detail","Profile","ModifyAd","CreateAd","Favorites","Chats","Messages","Feedback","Footer","PublicProfile","Route","withRouter","Redirect","useLocation","authenticateUser","registerUser","retrieveUser","searchAds","retrieveAd","retrievePublicUser","retrieveAds","removeAd","modifyAd","saveImageAd","modifyUser","saveImageProfile","createAd","retrievePublicAds","retrieveComments","addComment","retrieveFavs","toggleFavAd","retrieveChats","retrieveChat","addMessage","removeChat","createChat","qs","history","location","ads","setAds","adsSearch","setadsSearch","adId","setAdId","ad","setAd","user","setUser","idPublic","setIdPublic","comments","setComments","chats","setChats","chat","setChat","error","setError","query","setQuery","render","setRender","sessionStorage","token","search","split","handleGoBack","goBack","handleLogout","clear","push","handleGoToRegister","handleGoToLogin","handleRegister","name","surname","city","address","email","password","handleLogin","handleSearch","handleAdDetail","id","handleProfile","handleDeleteAd","handleToUpdateAd","handleOnUpdateAd","image","title","description","price","priceN","Number","parseInt","handleUpdateUser","handleToCreateAd","handleCreateAd","handleToPubliProfile","handleCreateComment","comment","idComment","handleToFavorites","handleFav","handleOnFav","comeFrom","handleToChats","handleToChat","idChat","handleDeleteChat","handleCreateMessage","message","idMessage","handleCreateChat","props"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './index.sass'\r\nimport Register from '../Register'\r\nimport Header from '../Header'\r\nimport Login from '../Login'\r\nimport Landing from '../Landing'\r\nimport Search from '../Search'\r\nimport Detail from '../Detail'\r\nimport Profile from '../Profile'\r\nimport ModifyAd from '../ModifyAd'\r\nimport CreateAd from '../CreateAd'\r\nimport Favorites from '../Favorites'\r\nimport Chats from '../Chats'\r\nimport Messages from '../Messages'\r\nimport Feedback from '../Feedback'\r\n\r\nimport Footer from '../Footer'\r\nimport PublicProfile from '../PublicProfile'\r\nimport { Route, withRouter, Redirect, useLocation} from 'react-router-dom'\r\nimport { authenticateUser, registerUser, retrieveUser, searchAds, retrieveAd, retrievePublicUser, retrieveAds, removeAd, modifyAd, saveImageAd, modifyUser, saveImageProfile, \r\n         createAd, retrievePublicAds, retrieveComments, addComment, retrieveFavs, toggleFavAd, retrieveChats, retrieveChat, addMessage, removeChat, createChat} from '../../logic'\r\n\r\nimport qs from 'querystringify'\r\n\r\n\r\nexport default withRouter(function ({ history, location}) {\r\n    const [ads, setAds] = useState([])\r\n    const [adsSearch, setadsSearch] = useState([])\r\n    const [adId, setAdId] = useState([])\r\n    const [ad, setAd] = useState([])\r\n    const [user, setUser] = useState([])\r\n    const [idPublic, setIdPublic] = useState([])\r\n    const [comments, setComments] = useState([])\r\n    const [chats, setChats] = useState([])\r\n    const [chat, setChat] = useState([])\r\n    const [error, setError] = useState([])\r\n    const [query, setQuery] = useState([])\r\n    const [render, setRender] = useState(true)\r\n    \r\n    //history.pathname.split('/')\r\n\r\n    useEffect(() => {\r\n        const { token } = sessionStorage;      \r\n\r\n        (async () => {\r\n            if (token) {\r\n\r\n                const user = await retrieveUser(token)\r\n                setUser(user)\r\n                \r\n                const [,query] = location.search.split('?q=')\r\n                setQuery(query)\r\n\r\n                // if (query) {\r\n                //     const ads = await searchAds(token, query)\r\n                //     setAds(ads)   \r\n                // }\r\n\r\n                const ads = await searchAds(token, query)\r\n                setadsSearch(ads)   \r\n\r\n            }\r\n        })()\r\n    }, [sessionStorage.token, location.search])\r\n\r\n\r\n    function handleGoBack() { \r\n\r\n        history.goBack()\r\n        // history.push(`/${webant}`) \r\n    }\r\n\r\n    function handleLogout() {\r\n        sessionStorage.clear()\r\n        history.push('/')\r\n    }\r\n\r\n    function handleGoToRegister() { history.push('/register') }\r\n\r\n    function handleGoToLogin() { history.push('/login') }\r\n\r\n\r\n    async function handleRegister(name, surname, city, address, email, password) {\r\n        try {\r\n            await registerUser(name, surname, city, address, email, password)\r\n\r\n            history.push('/login')\r\n        } catch (error) {\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n    }\r\n\r\n    async function handleLogin(email, password) {\r\n        try {\r\n            const token = await authenticateUser(email, password)\r\n            sessionStorage.token = token\r\n            \r\n\r\n            history.push('/search')\r\n        } catch (error) {\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n    }\r\n\r\n    async function handleSearch(query) {\r\n        try {\r\n\r\n            history.push(`/search?q=${query}`)\r\n\r\n        } catch (error) {\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n    }\r\n\r\n    async function handleAdDetail(adId) {\r\n        try {\r\n            const token = sessionStorage.token\r\n            const ad = await retrieveAd(token, adId)\r\n            const { name, id } = await retrievePublicUser(ad.user)\r\n\r\n            ad.name = name\r\n            ad.idPublic = id\r\n\r\n            setAdId(adId)\r\n            setAd(ad)\r\n\r\n            history.push(`/ad/${adId}`)\r\n\r\n        } catch (error) {\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n    }\r\n\r\n    async function handleProfile() {\r\n        try {\r\n            const token = sessionStorage.token\r\n\r\n            const user = await retrieveUser(token)\r\n\r\n            const ads = await retrieveAds(token)\r\n\r\n            setAds(ads)\r\n            setUser(user)\r\n\r\n            history.push(\"/profile\")\r\n\r\n        } catch (error) {\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n    }\r\n\r\n    async function handleDeleteAd(adId) {\r\n        try {\r\n            const token = sessionStorage.token\r\n\r\n            await removeAd(token, adId)\r\n\r\n            const ads = await retrieveAds(token)\r\n\r\n            setAds(ads)            \r\n\r\n            history.push(\"/profile\")\r\n\r\n        } catch (error) {\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n    }\r\n\r\n    async function handleToUpdateAd(adId) {\r\n\r\n         try {\r\n\r\n            const token = sessionStorage.token \r\n\r\n            const ad = await retrieveAd(token, adId)\r\n\r\n            setAd(ad)   \r\n            setAdId(adId)       \r\n\r\n            // history.push(\"/update\")    \r\n\r\n            history.push(`/update/${adId}`)\r\n\r\n        } catch (error) {\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }      \r\n    }\r\n\r\n    async function handleOnUpdateAd(image, adId, title, description, price) {\r\n\r\n         try {\r\n\r\n            const token = sessionStorage.token \r\n\r\n            const priceN = Number.parseInt(price)\r\n\r\n            await modifyAd(token, adId, title, description, priceN)\r\n\r\n            if (image) {\r\n\t\t\t\tawait saveImageAd(token, adId, image)\r\n\t\t\t}\r\n\r\n            const ad = await retrieveAd(token, adId)\r\n\r\n            setAd(ad)   \r\n            setAdId(adId)     \r\n\r\n            history.push(\"/profile\")    \r\n\r\n            // history.push(`/update/${adId}`)\r\n\r\n        } catch (error) {\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }      \r\n    }\r\n\r\n    async function handleUpdateUser(image, name, surname, city, address ) {\r\n\r\n         try {\r\n\r\n            const token = sessionStorage.token \r\n\r\n            await modifyUser(token, name, surname, city, address)\r\n\r\n            if (image) {\r\n\t\t\t\tawait saveImageProfile(token, image)\r\n\t\t\t}\r\n\r\n            const user = await retrieveUser(token)\r\n\r\n            setUser(user)            \r\n\r\n           history.push(\"/profile\")\r\n\r\n        } catch (error) {\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }      \r\n    }\r\n\r\n    async function handleToCreateAd( ) {   \r\n\r\n           history.push(\"/newad\")\r\n  \r\n    }\r\n\r\n    async function handleCreateAd(image, title, price, description) {   \r\n\r\n         try {\r\n\r\n            const token = sessionStorage.token \r\n\r\n            const priceN = Number.parseInt(price)\r\n\r\n            const adId = await createAd(token, title, description, priceN)\r\n\r\n            if (image) {\r\n\t\t\t\tawait saveImageAd(token, adId, image)\r\n\t\t\t}\r\n\r\n            const user = await retrieveUser(token)\r\n            const ad = await retrieveAd(token, adId)\r\n\r\n            setAd(ad)  \r\n            setUser(user)            \r\n\r\n           history.push(`/ad/${adId}`)\r\n\r\n        } catch (error) {\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }  \r\n    }\r\n\r\n    async function handleToPubliProfile(id) {   \r\n        try {\r\n            const token = sessionStorage.token \r\n            let user = \"\"\r\n            let ads = []\r\n            let idPublic = \"\"\r\n\r\n            if (!id) {\r\n                user = await retrieveUser(token)\r\n                id = user.id\r\n                ads = await retrieveAds(token)\r\n\r\n\r\n\r\n            } else {\r\n                user = await retrievePublicUser(id)\r\n                id = user.id\r\n                ads = await retrievePublicAds(token, id)\r\n                idPublic = id\r\n                setIdPublic(idPublic)  \r\n\r\n            } \r\n            const comments = await retrieveComments(id)\r\n\r\n            setAds(ads)   \r\n            setUser(user)\r\n            setComments(comments)\r\n\r\n            history.push(`/publicprofile/${id}`)\r\n        } catch(error) {\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n  \r\n    }\r\n\r\n    async function handleCreateComment(comment, id) {  \r\n\r\n        try {\r\n        if (comment != \"\") {\r\n            const token = sessionStorage.token \r\n  \r\n            const idComment = await addComment(token, id, comment)\r\n\r\n            const comments = await retrieveComments(id)\r\n\r\n            setComments(comments)\r\n\r\n        }\r\n        \r\n        history.push(`/publicprofile/${id}`)\r\n        }catch(error){\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n  \r\n    }\r\n\r\n    async function handleToFavorites() { \r\n        try {\r\n        const token = sessionStorage.token   \r\n\r\n        const ads = await retrieveFavs(token)\r\n\r\n        setAds(ads)   \r\n    \r\n        history.push(`/favorites`)\r\n        }catch(error){\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n  \r\n    }\r\n\r\n    async function handleFav() { \r\n        try {\r\n\r\n        const token = sessionStorage.token   \r\n\r\n        const ads = await retrieveFavs(token)\r\n\r\n        setAds(ads)   \r\n    \r\n        history.push(`/favorites`)\r\n        }catch(error){\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n  \r\n    }\r\n\r\n    async function handleOnFav(id, comeFrom) { \r\n        try {\r\n        const token = sessionStorage.token   \r\n\r\n        await toggleFavAd(token, id)\r\n\r\n        if (comeFrom === 'favorites' ) {\r\n            const ads = await retrieveFavs(token)\r\n             setAds(ads) \r\n        } else if (comeFrom === 'search') {\r\n            const ads = await searchAds(token, query)\r\n             setadsSearch(ads) \r\n        }else if (comeFrom === 'ad') {\r\n            const ad = await retrieveAds(token, id)\r\n            setAds(ads) \r\n         }else {\r\n            const ads = await retrieveAds(token)\r\n            setAds(ads) \r\n        }\r\n        \r\n        \r\n    \r\n        history.push(`/${comeFrom}`)\r\n        }catch(error){\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n  \r\n    }\r\n\r\n    async function handleToChats() { \r\n\r\n        try {\r\n        const token = sessionStorage.token   \r\n        \r\n        const chats = await retrieveChats(token)\r\n        const user = await retrieveUser(token)\r\n\r\n        setUser(user)\r\n        setChats(chats)   \r\n    \r\n        history.push(`/chats`)\r\n\r\n        }catch(error){\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n  \r\n    }\r\n\r\n    async function handleToChat(idChat) { \r\n\r\n        try {\r\n        const token = sessionStorage.token   \r\n        \r\n        const chat = await retrieveChat(token, idChat)\r\n        const user = await retrieveUser(token)\r\n\r\n        chat.idChat = idChat\r\n\r\n        setUser(user)\r\n        setChat(chat)   \r\n    \r\n        history.push(`/chat/${idChat}`)\r\n\r\n        }catch(error){\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n  \r\n    }\r\n\r\n    async function handleDeleteChat(idChat) { \r\n\r\n        try {\r\n        const token = sessionStorage.token   \r\n        \r\n        await removeChat(token, idChat)\r\n        const chats = await retrieveChats(token)\r\n        const user = await retrieveUser(token)\r\n\r\n        setUser(user)\r\n        setChats(chats)   \r\n    \r\n        history.push(`/chats`)\r\n\r\n        }catch(error){\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n  \r\n    }\r\n\r\n    async function handleCreateMessage(message, idChat) { \r\n        try {\r\n        if (message !== \"\") {\r\n            const token = sessionStorage.token \r\n  \r\n            const idMessage = await addMessage(token, idChat, message)\r\n\r\n            const chat = await retrieveChat(token, idChat)\r\n\r\n            chat.idChat = idChat\r\n\r\n            setUser(user)\r\n            setChat(chat)   \r\n\r\n        }\r\n        \r\n        history.push(`/chat/${idChat}`)\r\n        }catch(error){\r\n            setError(error)   \r\n            history.push(\"/error\")\r\n        }\r\n  \r\n    }\r\n\r\n    async function handleCreateChat(idPublic) { \r\n\r\n        try {\r\n        const token = sessionStorage.token   \r\n\r\n        const idChat = await createChat(token, idPublic)\r\n        \r\n        const chat = await retrieveChat(token, idChat)\r\n        const user = await retrieveUser(token)\r\n\r\n        chat.idChat = idChat\r\n\r\n        setUser(user)\r\n        setChat(chat)   \r\n    \r\n        history.push(`/chat/${idChat}`)\r\n\r\n        }catch(error){\r\n            setError(error.message)   \r\n            history.push(\"/error\")\r\n        }\r\n  \r\n    }\r\n\r\n\r\n    const { token } = sessionStorage\r\n\r\n    return <>\r\n        {/* <Route exact path=\"/\" render={() => <Header onBack={handleGoBack}/>} /> */}\r\n        <Route exact path=\"/\" render={() => token ? <Redirect to=\"/search\" /> : <><Landing onLogin={handleGoToLogin} onRegister={handleGoToRegister}/><Footer/></>}/> \r\n        <Route path=\"/register\" render={() => token ? <Redirect to=\"/search\" /> : <><Header onBack={handleGoBack}/>  <Register onRegister={handleRegister}/> <Footer/></>}/> \r\n        <Route path=\"/login\" render={() => token ?  <Redirect to=\"/search\" /> : <><Header onBack={handleGoBack}/> <Login onLogin={handleLogin}/> <Footer/></>}/>  \r\n        <Route path=\"/search\" render={ props => token ? <><Search query={query} onSearch={handleSearch} onLogout={handleLogout} ads={adsSearch} adDetail={handleAdDetail} onProfile={handleProfile} onToCreateAd={handleToCreateAd} onToPubliProfile={handleToPubliProfile}\r\n                                                      onToFavorites={handleToFavorites} onFav={handleOnFav} onToChats={handleToChats}/> <Footer/></> : <Redirect to='/' />}/> \r\n        <Route path=\"/ad/:adId\" render={() => token ? <><Header onBack={handleGoBack}/><Detail ad={ad} user={user} onCreateChat={handleCreateChat} onToPubliProfile={handleToPubliProfile} onFav={handleOnFav}/> <Footer/></> : <Redirect to='/' />}/> \r\n        <Route path=\"/profile\" render={() => token ? <><Header onBack={handleGoBack}/><Profile ads={ads} user={user} adDetail={handleAdDetail} onDeleteAd={handleDeleteAd} onToUpdateAd={handleToUpdateAd} onUpdateUser={handleUpdateUser}/></> : <Redirect to='/' /> }/> \r\n        <Route path=\"/update/:adId\" render={() => token ? <><Header onBack={handleGoBack}/><ModifyAd ad={ad} onUpdateAd={handleOnUpdateAd}/> <Footer/></> : <Redirect to='/' />}/>\r\n        <Route path=\"/newad\" render={() => token ? <><Header onBack={handleGoBack}/><CreateAd onCreateAd={handleCreateAd}/> <Footer/></> : <Redirect to='/' />}/>\r\n        <Route path=\"/publicprofile/:id\" render={() => token ? <><Header onBack={handleGoBack}/> <PublicProfile comments={comments} ads={ads} user={user} adDetail={handleAdDetail} OnCreateComment={handleCreateComment} onFav={handleOnFav}/><Footer/></> : <Redirect to='/' />}/>\r\n        <Route path=\"/favorites\" render={() => token ? <><Header onBack={handleGoBack}/><Favorites ads={ads} adDetail={handleAdDetail} onFav={handleOnFav}/> <Footer/></> : <Redirect to='/' />}/>\r\n        <Route path=\"/chats\" render={() => token ? <><Header onBack={handleGoBack}/><Chats chats={chats} user={user} onDeleteChat={handleDeleteChat} onChat={handleToChat}/> <Footer/></> : <Redirect to='/' />}/>\r\n        <Route path=\"/chat/:chatId\" render={() => token ? <><Header onBack={handleGoBack}/><Messages chat={chat} user={user} OnCreateMessage={handleCreateMessage}/> <Footer/></> : <Redirect to='/' />}/> \r\n        <Route path=\"/error\" render={() => <><Feedback error={error} onBack={handleGoBack}/></>}/>\r\n\r\n        \r\n    </>\r\n})\r\n{/* <Route path=\"/register\" render={() => token ? <Redirect to=\"/board\" /> : <Register onRegister={handleRegister} onBack={handleGoBack} />} />\r\n<Route path=\"/login\" render={() => token ? <Redirect to=\"/board\" /> : <Login onLogin={handleLogin} onBack={handleGoBack} />} />\r\n<Route path=\"/board\" render={() => token ? <Board user={name} tasks={tasks} onLogout={handleLogout} onChangeTaskStatus={handleChangeTaskStatus} onNewTask={handleNewTask} /> : <Redirect to=\"/\" />} />\r\n<Route path=\"/hello/:name\" render={props => <Hello name={props.match.params.name} />} />\r\n<Route path=\"/hello/:name\" render={({ match: { params: { name } } }) => <Hello name={name} />} /> */}"]},"metadata":{},"sourceType":"module"}