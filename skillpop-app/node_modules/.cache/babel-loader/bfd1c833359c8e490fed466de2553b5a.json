{"ast":null,"code":"const call = require('../../utils/call');\n\nconst _require = require('skillpop-util'),\n      validate = _require.validate,\n      NotFoundError = _require.errors.NotFoundError; // const { env: { REACT_APP_API_URL: API_URL } } = process\n\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\nmodule.exports = function (id) {\n  validate.string(id);\n  validate.string.notVoid('id', id);\n  return (async () => {\n    const res = await call(`${API_URL}/users/${id}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n\n    if (res.status === 200) {\n      const user = JSON.parse(res.body);\n      user.lastAccess = new Date(user.lastAccess);\n      return user;\n    }\n\n    if (res.status === 404) throw new NotFoundError(JSON.parse(res.body).message);\n    throw new Error(JSON.parse(res.body).message);\n  })();\n};","map":{"version":3,"sources":["C:/Users/xavie/bootcamp/collab/skylab-bootcamp-201909/staff/javier-sevilla/skillpop/skillpop-app/src/logic/retrieve-public-user/index.js"],"names":["call","require","validate","NotFoundError","errors","API_URL","process","env","REACT_APP_API_URL","module","exports","id","string","notVoid","res","method","headers","status","user","JSON","parse","body","lastAccess","Date","message","Error"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,kBAAD,CAApB;;iBACgDA,OAAO,CAAC,eAAD,C;MAA/CC,Q,YAAAA,Q;MAAoBC,a,YAAVC,M,CAAUD,a,EAC5B;;;AACA,MAAME,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAA5B;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAAUC,EAAV,EAAc;AAC3BT,EAAAA,QAAQ,CAACU,MAAT,CAAgBD,EAAhB;AACAT,EAAAA,QAAQ,CAACU,MAAT,CAAgBC,OAAhB,CAAwB,IAAxB,EAA8BF,EAA9B;AAEA,SAAO,CAAC,YAAY;AAChB,UAAMG,GAAG,GAAG,MAAMd,IAAI,CAAE,GAAEK,OAAQ,UAASM,EAAG,EAAxB,EAA2B;AAC7CI,MAAAA,MAAM,EAAE,KADqC;AAE7CC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAFoC,KAA3B,CAAtB;;AAKA,QAAIF,GAAG,CAACG,MAAJ,KAAe,GAAnB,EAAwB;AACpB,YAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWN,GAAG,CAACO,IAAf,CAAb;AAEAH,MAAAA,IAAI,CAACI,UAAL,GAAkB,IAAIC,IAAJ,CAASL,IAAI,CAACI,UAAd,CAAlB;AAEA,aAAOJ,IAAP;AACH;;AAED,QAAIJ,GAAG,CAACG,MAAJ,KAAe,GAAnB,EAAwB,MAAM,IAAId,aAAJ,CAAkBgB,IAAI,CAACC,KAAL,CAAWN,GAAG,CAACO,IAAf,EAAqBG,OAAvC,CAAN;AAExB,UAAM,IAAIC,KAAJ,CAAUN,IAAI,CAACC,KAAL,CAAWN,GAAG,CAACO,IAAf,EAAqBG,OAA/B,CAAN;AACH,GAjBM,GAAP;AAkBH,CAtBD","sourcesContent":["const call = require('../../utils/call')\r\nconst { validate, errors: { NotFoundError } } = require('skillpop-util')\r\n// const { env: { REACT_APP_API_URL: API_URL } } = process\r\nconst API_URL = process.env.REACT_APP_API_URL\r\n\r\nmodule.exports = function (id) {\r\n    validate.string(id)\r\n    validate.string.notVoid('id', id)\r\n\r\n    return (async () => {\r\n        const res = await call(`${API_URL}/users/${id}`, {\r\n            method: 'GET',\r\n            headers: { 'Content-Type': 'application/json' }\r\n        })\r\n\r\n        if (res.status === 200) {\r\n            const user = JSON.parse(res.body)\r\n\r\n            user.lastAccess = new Date(user.lastAccess)\r\n\r\n            return user\r\n        }\r\n        \r\n        if (res.status === 404) throw new NotFoundError(JSON.parse(res.body).message)\r\n\r\n        throw new Error(JSON.parse(res.body).message)\r\n    })()\r\n}"]},"metadata":{},"sourceType":"module"}